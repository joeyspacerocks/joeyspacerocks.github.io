<html>
    <head>
	<title>Spooky Pooky #48 - We Get a Gun</title>
        <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
    	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" />
        <link rel="stylesheet" type="text/css" href="main.css" />
        <style type="text/css">
            .logo {
                width: 100px;
            }
        </style>
    </head>
    <body>
        <div class="main">
            
            <div class="post-header">
                <div class="banner">
                    <img src="images/spdevlog.png" />
                </div>
            </div>

	    <div class="nav">
	        <a href="index.html">Home</a>
	    </div>

        <div class="post">
            <div class="title">
                <h1>Spooky Pooky #48 - We Get a Gun</h1>
                <p class="strapline">Rejigging the collision system to support weapons.
</p>
                <p class="publish">Published on <span class="date">01 Apr 2016</span> by Joe</p>
            </div>
            
            <p>So then. Weapons. Here we go, some explodey bang-bangs. Finally poor Horatio can fight back ...</p>
<video autoplay="true" muted="true" loop="true"><source src="images/PlasticEnragedCob.mp4" type="video/mp4"></video>

<video autoplay="true" muted="true" loop="true"><source src="images/OrganicMassiveGrassspider.mp4" type="video/mp4"></video>

<p>(The gif encoding has washed out some of the colours so it's all looking a bit grey at the top there instead of the vile green/yellow it should be..)</p>
<p>So here he has a simple laser gun with which he is massacring some defenceless, and harmless, caterpillars. Well, he has been through a lot, so we'll cut him a little slack.</p>
<p>As usual this all took a lot longer to get working than it probably should have, thanks to my usual approach of implementing just enough but no more. My code-that-is-where-an-engine-would-go .. um .. engine .. carried out collision checks between the player and other (suitably flagged) entities, but not between arbitrary entities such as, say, a laser bolt and a caterpillar.</p>
<p>So first change was to pull out this collision stuff into a more generic form, which was reasonably simple. My entities implement flags (such as E_COLLIDES_ENTITY) indicating that they'd like to collide with other things. If they do they can then indicate that they'd like to receive events (i.e. notifications) that they hit something by adding an event to their event mask (e.g. EVT_COLLIDE). This way I only collide things that care together.</p>
<p>The generic code will also apply damage (if the collider has a 'damage' quantity set) and trigger a corresponding EVT_HURT (or EVT_DEAD if things get really bad) in the collidee. That's a word, right?</p>
<p>So things are coming together in the main system to support this stuff. Along the way I've noticed several glitches (such as caterpillars falling through the floor when they crawl into a door), so I'm accumulating a little list of things to fix which I pick off when I've got a spare 10 minutes to kill.</p>
<p>I've also been a good boy and tried to keep adding sound effects as I go. The game has a sound design best described as 'glitchy' and 'atmospheric', to suit it's techno style.</p>
<p>The weapon implemented (laser) is just a test, and really belongs to various enemies, although I may add it as a collectable weapon. So next up is to design and implement the various weapons I really want Horatio to wield, plus their effects on the enemies and environment.</p>
        </div>

        <div class="publish">Published on <span class="date">01 Apr 2016</span> by Joe</div>
	    <div><a href="index.html"><i class="fa fa-chevron-left"></i> Back to index</a></div>

	    <div class="links">
		<p>
		Interested in finding out more about <strong>Spooky Pooky</strong>?
		</p>
                <ul>
                 <li><i class="fa fa-envelope"></i> <a href="http://eepurl.com/bcNbXr">Sign up for <strong>news and updates</strong></a></li>
                 <li><i class="fa fa-twitter"></i> <a href="https://twitter.com/joeyspacerocks">Talk to me <strong>@joeyspacerocks</strong></a></li>
                 <li><i class="fa fa-desktop"></i> <a href="../spookypooky/index.html">Visit the main site</a></li>
                </ul>
	    </div>

            <div class="comments">
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES * * */
                    var disqus_shortname = 'fistfulofsquid';
                
                        /* * * DON'T EDIT BELOW THIS LINE * * */
                        (function() {
                         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                     </script>
                 <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
            </div>

        </div>

        <div class="footer">
            <div>
                <a href="../index.html">
                    <p><img class="logo" src="../logo.svg" /></p>
                    <h1>fistful of squid</h1>
                </a>
                <p><i class="fa fa-twitter"></i> Talk to me <a href="https://twitter.com/joeyspacerocks">@joeyspacerocks</a></p>
                <p class="copyright">&copy; copyright Joe Trewin 2015 - present</p>
            </div>
        </div>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-59810066-1', 'auto');
          ga('send', 'pageview');

        </script>
    </body>
</html>
