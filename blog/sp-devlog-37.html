<html>
    <head>
    	<title>Spooky Pooky #37 - Room to Move</title>
        <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
    	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" />
        <link rel="stylesheet" type="text/css" href="main.css" />
        <style type="text/css">
            .logo {
                width: 100px;
            }
        </style>
    </head>
    <body>
        <div class="main">
            
            <div class="post-header">
                <div class="banner">
                    <img src="images/spdevlog.png" />
                </div>
            </div>

	    <div class="nav">
	        <a href="/blog">Home</a>
	    </div>

        <div class="post">
            <div class="title">
                <h1>Spooky Pooky #37 - Room to Move</h1>
                <p class="strapline">First steps to a larger world.
</p>
                <p class="publish">Published on <span class="date">19 Jan 2016</span> by Joe</p>
            </div>
            
            <p>Sometimes the simplest of things take an age to get working. Like room transitions. As seen in the horribly laggy gif below:</p>
<video autoplay="true" muted="true" loop="true"><source src="images/GoodnaturedWarmheartedFirefly.mp4" type="video/mp4"></video>

<p>My rooms are stored as separate Tiled maps. There is an entity type called a 'transporter' which has a collision function attached to it. When a player runs into the transporter it assumes control (via a generic target property, and a corresponding owner property in the player entity).</p>
<p>The transporter think function then artificially keeps the player running in the same direction so that they fully enter the entity (thus disappearing out of view).</p>
<p>Once contained it triggers the room change logic, which looks up the destination room in a cache, loading it if not present. Simultaneously a transition effect is played. The rooms are relatively small (a handful of screens typically), so load quickly and are cached in memory.</p>
<p>The player is then attached to the map transporter entity in the new room (as indicated by the destination of the original trigger transporter), and control is given over to that to walk the player fully out and into the level.</p>
<p>The transition effect is lacking at the moment so might tinker about with that in a bit.</p>
<p>It all seems a bit over-complicated but it's flexible and actually straightforward in the code, plus it's driven via the standard collision triggers and think hooks of the rest of the system.</p>
        </div>

        <div class="publish">Published on <span class="date">19 Jan 2016</span> by Joe</div>
	    <div><a href="/blog"><i class="fa fa-chevron-left"></i> Back to index</a></div>

	    <div class="links">
		<p>
		Interested in finding out more about <strong>Spooky Pooky</strong>?
		</p>
                <ul>
                <li><i class="fa fa-rss-square"></i> <a href="/blog/rss">Subscribe to the blog</a></li>
                <li><i class="fa fa-envelope"></i> <a href="http://eepurl.com/bcNbXr">Sign up to the newsletter for <strong>release updates</strong></a></li>
                 <li><i class="fa fa-twitter"></i> <a href="https://twitter.com/joeyspacerocks">Talk to me <strong>@joeyspacerocks</strong></a></li>
                 <li><i class="fa fa-desktop"></i> <a href="../spookypooky/index.html">Visit the main site</a></li>
                </ul>
	    </div>

            <div class="comments">
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES * * */
                    var disqus_shortname = 'fistfulofsquid';
                
                        /* * * DON'T EDIT BELOW THIS LINE * * */
                        (function() {
                         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                     </script>
                 <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
            </div>

        </div>

        <div class="footer">
            <div>
                <a href="../index.html">
                    <p><img class="logo" src="../logo.svg" /></p>
                    <h1>fistful of squid</h1>
                </a>
                <p><i class="fa fa-twitter"></i> Talk to me <a href="https://twitter.com/joeyspacerocks">@joeyspacerocks</a></p>
                <p class="copyright">&copy; copyright Joe Trewin 2015 - present</p>
            </div>
        </div>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-59810066-1', 'auto');
          ga('send', 'pageview');

        </script>
    </body>
</html>
